<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Marmitaria da Fabiana - Login</title>
  <link rel="icon" type="image/x-icon" href="logo.ico">
  <style>
    body, html {
      height: 100%;
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #fef9f4;
      color: #5a4d41;
    }
    #loginContainer, #container {
      max-width: 550px;
      margin: 40px auto;
      padding: 30px 25px;
      box-sizing: border-box;
      background: #fffdfa;
      border-radius: 12px;
      box-shadow: 0 8px 20px rgba(90, 77, 65, 0.12);
    }
    #container {
      display: none; /* Come√ßa escondido, s√≥ aparece ap√≥s login */
    }
    h2 {
      text-align: center;
      color: #7a6f61;
      margin-bottom: 20px;
    }
    nav {
      display: flex;
      justify-content: space-around;
      margin-bottom: 20px;
    }
    nav button {
      flex: 1;
      padding: 10px;
      margin: 0 5px;
      background-color: #a9977f;
      border: none;
      border-radius: 8px;
      color: #fffdfa;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    nav button:hover {
      background-color: #7f6f5e;
    }
    .aba {
      display: none;
    }
    .aba.ativa {
      display: block;
    }
    input, textarea, select, button {
      display: block;
      margin: 10px 0 15px 0;
      padding: 10px 12px;
      width: 100%;
      font-size: 15px;
      border: 1.8px solid #d4cdbf;
      border-radius: 8px;
      background-color: #fcfbf7;
      color: #5a4d41;
      box-sizing: border-box;
      font-weight: 500;
      resize: vertical;
      font-family: inherit;
    }
    textarea { min-height: 54px; }
    button[type="submit"], button#logoutBtn {
      background-color: #a9977f;
      color: #fffdfa;
      font-weight: bold;
    }
    button[type="submit"]:hover, button#logoutBtn:hover {
      background-color: #7f6f5e;
    }
    .pedido {
      border: 1px solid #d4cdbf;
      background: #fcfbf7;
      border-radius: 10px;
      padding: 12px 14px;
      margin-top: 14px;
      font-family: monospace;
      font-size: 13px;
      color: #5a4d41;
      position: relative;
    }
    .comanda { white-space: pre-wrap; word-break: break-word; margin-bottom: 10px; }
    .botoes-pedido { text-align: right; }
    .botoes-pedido button {
      margin-left: 8px;
      padding: 6px 12px;
      font-size: 13px;
      border-radius: 8px;
      background-color: #c7bba6;
      color: #5a4d41;
      border: none;
      cursor: pointer;
      font-weight: 600;
    }
    .botoes-pedido button:hover {
      background-color: #a9977f;
      color: #fffdfa;
    }
    #resumo {
      font-family: monospace;
      font-size: 15px;
      color: #7a6f61;
      text-align: center;
      border-top: 2px solid #d4cdbf;
      padding-top: 15px;
    }
    #resumo strong { color: #a9977f; }

    /* Login espec√≠fico */
    #loginContainer h2 {
      margin-bottom: 30px;
    }
  </style>
</head>
<body>
  <div id="loginContainer">
    <h2>üîê Login Marmitaria da Fabiana</h2>
    <form id="loginForm" autocomplete="off">
      <input type="text" id="username" placeholder="Usu√°rio" required />
      <input type="password" id="password" placeholder="Senha" required />
      <button type="submit">Entrar</button>
    </form>
  </div>

  <div id="container">
    <h2>üçΩÔ∏è Marmitaria da Fabiana</h2>
    <button id="logoutBtn" style="margin-bottom:15px;">üö™ Logout</button>
    <nav>
      <button onclick="trocarAba('lancamento')">üìù Lan√ßar</button>
      <button onclick="trocarAba('comandas')">üìã Comandas</button>
      <button onclick="trocarAba('financeiro')">üí∞ Financeiro</button>
    </nav>

    <div id="lancamento" class="aba ativa">
      <form id="pedidoForm" autocomplete="off">
        <input type="text" id="cliente" placeholder="üë§ Nome do cliente (opcional)" />
        <select id="tamanho" required>
          <option value="" disabled selected>üìè Tamanho</option>
          <option value="Pequena">Pequena</option>
          <option value="M√©dia">M√©dia</option>
          <option value="Grande">Grande</option>
        </select>
        <textarea id="itens" placeholder="üç≤ Itens do prato" required></textarea>
        <input type="text" id="extras" placeholder="‚ûï Extras" />
        <select id="pagamento" required>
          <option value="" disabled selected>üí≥ Forma de pagamento</option>
          <option value="Dinheiro">üíµ Dinheiro</option>
          <option value="Pix">‚ùñ Pix</option>
          <option value="Cart√£o">üí≥ Cart√£o</option>
        </select>
        <textarea id="observacoes" placeholder="üìù Observa√ß√µes"></textarea>
        <input type="number" id="valor" placeholder="üí∞ Valor (R$)" step="0.01" min="0" required />
        <button type="submit">‚ûï Adicionar Pedido</button>
      </form>
    </div>

    <div id="comandas" class="aba">
      <div id="listaPedidos"></div>
    </div>

    <div id="financeiro" class="aba">
      <div id="resumo">
        <strong>Total de Pedidos:</strong> <span id="totalPedidos">0</span><br />
        <strong>Total Arrecadado:</strong> R$ <span id="totalValor">0,00</span><br />
        <button onclick="limparPedidos()">üóëÔ∏è Limpar Tudo</button>
      </div>
    </div>
  </div>

  <script>
    const loginForm = document.getElementById("loginForm");
    const loginContainer = document.getElementById("loginContainer");
    const mainContainer = document.getElementById("container");
    const logoutBtn = document.getElementById("logoutBtn");

    // Usu√°rio e senha fixos para exemplo:
    const USUARIO_FIXO = "admin";
    const SENHA_FIXA = "240699";

    // Checar se j√° est√° logado no localStorage
    if (localStorage.getItem("logado") === "true") {
      mostrarMarmitaria();
    }

    loginForm.addEventListener("submit", e => {
      e.preventDefault();
      const user = document.getElementById("username").value.trim();
      const pass = document.getElementById("password").value.trim();

      if(user === USUARIO_FIXO && pass === SENHA_FIXA) {
        localStorage.setItem("logado", "true");
        mostrarMarmitaria();
      } else {
        alert("Usu√°rio ou senha incorretos.");
      }
    });

    logoutBtn.addEventListener("click", () => {
      localStorage.removeItem("logado");
      mainContainer.style.display = "none";
      loginContainer.style.display = "block";
    });

    function mostrarMarmitaria() {
      loginContainer.style.display = "none";
      mainContainer.style.display = "block";
    }

    // Resto do c√≥digo da marmitaria (seu c√≥digo original)
    const form = document.getElementById("pedidoForm");
    const listaPedidos = document.getElementById("listaPedidos");
    const totalPedidosSpan = document.getElementById("totalPedidos");
    const totalValorSpan = document.getElementById("totalValor");

    let pedidos = [];

    function trocarAba(id) {
      document.querySelectorAll(".aba").forEach(a => a.classList.remove("ativa"));
      document.getElementById(id).classList.add("ativa");
    }

    function carregarPedidos() {
      const hoje = new Date().toISOString().slice(0,10);
      const dataSalva = localStorage.getItem("dataPedidos");
      const pedidosSalvos = localStorage.getItem("pedidos");

      if (dataSalva === hoje && pedidosSalvos) {
        pedidos = JSON.parse(pedidosSalvos);
      } else {
        pedidos = [];
        localStorage.setItem("dataPedidos", hoje);
        localStorage.setItem("pedidos", JSON.stringify(pedidos));
      }
      atualizarLista();
    }

    function salvarPedidos() {
      localStorage.setItem("pedidos", JSON.stringify(pedidos));
    }

    function atualizarLista() {
      listaPedidos.innerHTML = "";
      let totalValor = 0;

      pedidos.forEach((p, index) => {
        totalValor += p.valor;
        const div = document.createElement("div");
        div.className = "pedido";
        const texto = `Pedido N¬∫ ${index + 1}
Cliente: ${p.cliente || "-"}
Tamanho: ${p.tamanho}
Itens: ${p.itens}
Extras: ${p.extras || "-"}
Pagamento: ${p.pagamento}
Obs: ${p.observacoes || "-"}
Valor: R$ ${p.valor.toFixed(2)}
Hora: ${p.hora} - ${p.data}`;
        div.innerHTML = `<pre class="comanda">${texto}</pre>
          <div class="botoes-pedido">
            <button onclick="imprimir(${index})">üñ®Ô∏è</button>
            <button onclick="removerPedido(${index})">‚ùå</button>
          </div>`;
        listaPedidos.appendChild(div);
      });
      totalPedidosSpan.textContent = pedidos.length;
      totalValorSpan.textContent = totalValor.toFixed(2);
    }

    form.addEventListener("submit", e => {
      e.preventDefault();
      const cliente = form.cliente.value.trim();
      const tamanho = form.tamanho.value;
      const itens = form.itens.value.trim();
      const extras = form.extras.value.trim();
      const pagamento = form.pagamento.value;
      const observacoes = form.observacoes.value.trim();
      const valor = parseFloat(form.valor.value);
      if (!tamanho || !itens || !pagamento || isNaN(valor) || valor < 0) {
        alert("Preencha todos os campos obrigat√≥rios.");
        return;
      }
      const dataObj = new Date();
      const hora = dataObj.toLocaleTimeString('pt-BR', {hour: '2-digit', minute:'2-digit'});
      const data = dataObj.toLocaleDateString('pt-BR');
      pedidos.push({cliente, tamanho, itens, extras, pagamento, observacoes, valor, hora, data});
      salvarPedidos();
      atualizarLista();
      form.reset();
    });

    function removerPedido(index) {
      if (confirm("Remover este pedido?")) {
        pedidos.splice(index, 1);
        salvarPedidos();
        atualizarLista();
      }
    }

    function limparPedidos() {
      if (confirm("Deseja limpar todos os pedidos?")) {
        pedidos = [];
        salvarPedidos();
        atualizarLista();
      }
    }

    function imprimir(index) {
      const comanda = document.getElementsByClassName("comanda")[index];
      const win = window.open('', '', 'width=400,height=600');
      win.document.write(`<pre style="font-family: monospace">${comanda.textContent}</pre>`);
      win.document.close();
      win.focus();
      win.print();
      win.close();
    }

    carregarPedidos();

  </script>
</body>
</html>
